<div class="book-list-container">
  <div class="header">
    <h1>Biblioteca de Libroteca</h1>
    <button mat-raised-button color="primary" *ngIf="isAdmin" (click)="createBook()">
      <mat-icon>add</mat-icon>
      Agregar Libro
    </button>
  </div>

  <div class="loading-container" *ngIf="loading">
    <mat-spinner></mat-spinner>
  </div>

  <div class="books-grid" *ngIf="!loading && books.length > 0">
    <mat-card *ngFor="let book of books" class="book-card">
      <img mat-card-image 
           [src]="getImageSrc(book.cover_image_url)" 
           [alt]="book.title" 
           class="book-cover"
           (error)="onImageError($event)">
      
      <mat-card-content>
        <h2 class="book-title">{{ book.title }}</h2>
        <p class="book-author" *ngIf="book.author">{{ book.author }}</p>
        <p class="book-genre" *ngIf="book.genre">{{ book.genre }}</p>
        
        <div class="rating-container">
          <div class="stars">
            <mat-icon *ngFor="let star of getStars(book.average_rating)">{{ star }}</mat-icon>
          </div>
          <span class="rating-text" *ngIf="book.average_rating">
            {{ book.average_rating.toFixed(1) }} ({{ book.total_ratings }})
          </span>
        </div>
      </mat-card-content>
      
      <mat-card-actions>
        <button mat-button color="primary" (click)="viewDetails(book.id)">
          Ver Detalles
        </button>
      </mat-card-actions>
    </mat-card>
  </div>

  <div class="empty-state" *ngIf="!loading && books.length === 0">
    <mat-icon>library_books</mat-icon>
    <h2>No hay libros disponibles</h2>
    <p>SÃ© el primero en agregar un libro a la biblioteca</p>
    <button mat-raised-button color="primary" *ngIf="isAdmin" (click)="createBook()">
      Agregar Primer Libro
    </button>
  </div>
</div>
